begin_unit|revision:0.9.5;language:Java;cregit-version:0.0.1
begin_comment
comment|/*  * Licensed to the Apache Software Foundation (ASF) under one  * or more contributor license agreements.  See the NOTICE file  * distributed with this work for additional information  * regarding copyright ownership.  The ASF licenses this file  * to you under the Apache License, Version 2.0 (the  * "License"); you may not use this file except in compliance  * with the License.  You may obtain a copy of the License at  *     http://www.apache.org/licenses/LICENSE-2.0  * Unless required by applicable law or agreed to in writing, software  * distributed under the License is distributed on an "AS IS" BASIS,  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.  * See the License for the specific language governing permissions and  * limitations under the License.  */
end_comment

begin_package
DECL|package|org.apache.hadoop.yarn.server.resourcemanager.webapp
package|package
name|org
operator|.
name|apache
operator|.
name|hadoop
operator|.
name|yarn
operator|.
name|server
operator|.
name|resourcemanager
operator|.
name|webapp
package|;
end_package

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|common
operator|.
name|collect
operator|.
name|Sets
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|hadoop
operator|.
name|yarn
operator|.
name|api
operator|.
name|protocolrecords
operator|.
name|GetApplicationsRequest
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|hadoop
operator|.
name|yarn
operator|.
name|api
operator|.
name|records
operator|.
name|YarnApplicationState
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|hadoop
operator|.
name|yarn
operator|.
name|server
operator|.
name|resourcemanager
operator|.
name|ResourceManager
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|hadoop
operator|.
name|yarn
operator|.
name|server
operator|.
name|resourcemanager
operator|.
name|scheduler
operator|.
name|capacity
operator|.
name|CapacityScheduler
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|hadoop
operator|.
name|yarn
operator|.
name|webapp
operator|.
name|BadRequestException
import|;
end_import

begin_import
import|import
name|org
operator|.
name|junit
operator|.
name|Test
import|;
end_import

begin_import
import|import
name|java
operator|.
name|io
operator|.
name|IOException
import|;
end_import

begin_import
import|import
name|java
operator|.
name|util
operator|.
name|Set
import|;
end_import

begin_import
import|import static
name|org
operator|.
name|apache
operator|.
name|hadoop
operator|.
name|yarn
operator|.
name|server
operator|.
name|webapp
operator|.
name|WebServices
operator|.
name|parseQueries
import|;
end_import

begin_import
import|import static
name|org
operator|.
name|junit
operator|.
name|Assert
operator|.
name|assertEquals
import|;
end_import

begin_import
import|import static
name|org
operator|.
name|mockito
operator|.
name|Matchers
operator|.
name|anyBoolean
import|;
end_import

begin_import
import|import static
name|org
operator|.
name|mockito
operator|.
name|Matchers
operator|.
name|eq
import|;
end_import

begin_import
import|import static
name|org
operator|.
name|mockito
operator|.
name|Mockito
operator|.
name|mock
import|;
end_import

begin_import
import|import static
name|org
operator|.
name|mockito
operator|.
name|Mockito
operator|.
name|when
import|;
end_import

begin_class
DECL|class|TestApplicationsRequestBuilder
specifier|public
class|class
name|TestApplicationsRequestBuilder
block|{
DECL|method|getDefaultRequest ()
specifier|private
name|GetApplicationsRequest
name|getDefaultRequest
parameter_list|()
block|{
name|GetApplicationsRequest
name|req
init|=
name|GetApplicationsRequest
operator|.
name|newInstance
argument_list|()
decl_stmt|;
name|req
operator|.
name|setStartRange
argument_list|(
literal|0
argument_list|,
name|Long
operator|.
name|MAX_VALUE
argument_list|)
expr_stmt|;
name|req
operator|.
name|setFinishRange
argument_list|(
literal|0
argument_list|,
name|Long
operator|.
name|MAX_VALUE
argument_list|)
expr_stmt|;
return|return
name|req
return|;
block|}
annotation|@
name|Test
DECL|method|testDefaultRequest ()
specifier|public
name|void
name|testDefaultRequest
parameter_list|()
block|{
name|GetApplicationsRequest
name|request
init|=
name|ApplicationsRequestBuilder
operator|.
name|create
argument_list|()
operator|.
name|build
argument_list|()
decl_stmt|;
name|GetApplicationsRequest
name|expectedRequest
init|=
name|getDefaultRequest
argument_list|()
decl_stmt|;
name|assertEquals
argument_list|(
name|expectedRequest
argument_list|,
name|request
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
DECL|method|testRequestWithNullStateQuery ()
specifier|public
name|void
name|testRequestWithNullStateQuery
parameter_list|()
block|{
name|GetApplicationsRequest
name|request
init|=
name|ApplicationsRequestBuilder
operator|.
name|create
argument_list|()
operator|.
name|withStateQuery
argument_list|(
literal|null
argument_list|)
operator|.
name|build
argument_list|()
decl_stmt|;
name|GetApplicationsRequest
name|expectedRequest
init|=
name|getDefaultRequest
argument_list|()
decl_stmt|;
name|assertEquals
argument_list|(
name|expectedRequest
argument_list|,
name|request
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
DECL|method|testRequestWithEmptyStateQuery ()
specifier|public
name|void
name|testRequestWithEmptyStateQuery
parameter_list|()
block|{
name|GetApplicationsRequest
name|request
init|=
name|ApplicationsRequestBuilder
operator|.
name|create
argument_list|()
operator|.
name|withStateQuery
argument_list|(
literal|""
argument_list|)
operator|.
name|build
argument_list|()
decl_stmt|;
name|GetApplicationsRequest
name|expectedRequest
init|=
name|getDefaultRequest
argument_list|()
decl_stmt|;
name|assertEquals
argument_list|(
name|expectedRequest
argument_list|,
name|request
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
argument_list|(
name|expected
operator|=
name|BadRequestException
operator|.
name|class
argument_list|)
DECL|method|testRequestWithInvalidStateQuery ()
specifier|public
name|void
name|testRequestWithInvalidStateQuery
parameter_list|()
block|{
name|GetApplicationsRequest
name|request
init|=
name|ApplicationsRequestBuilder
operator|.
name|create
argument_list|()
operator|.
name|withStateQuery
argument_list|(
literal|"invalidState"
argument_list|)
operator|.
name|build
argument_list|()
decl_stmt|;
block|}
annotation|@
name|Test
DECL|method|testRequestWithValidStateQuery ()
specifier|public
name|void
name|testRequestWithValidStateQuery
parameter_list|()
block|{
name|GetApplicationsRequest
name|request
init|=
name|ApplicationsRequestBuilder
operator|.
name|create
argument_list|()
operator|.
name|withStateQuery
argument_list|(
name|YarnApplicationState
operator|.
name|NEW_SAVING
operator|.
name|toString
argument_list|()
argument_list|)
operator|.
name|build
argument_list|()
decl_stmt|;
name|GetApplicationsRequest
name|expectedRequest
init|=
name|getDefaultRequest
argument_list|()
decl_stmt|;
name|Set
argument_list|<
name|String
argument_list|>
name|appStates
init|=
name|Sets
operator|.
name|newHashSet
argument_list|(
name|YarnApplicationState
operator|.
name|NEW_SAVING
operator|.
name|toString
argument_list|()
argument_list|)
decl_stmt|;
name|Set
argument_list|<
name|String
argument_list|>
name|appStatesLowerCase
init|=
name|parseQueries
argument_list|(
name|appStates
argument_list|,
literal|true
argument_list|)
decl_stmt|;
name|expectedRequest
operator|.
name|setApplicationStates
argument_list|(
name|appStatesLowerCase
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
name|expectedRequest
argument_list|,
name|request
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
DECL|method|testRequestWithEmptyStateQueries ()
specifier|public
name|void
name|testRequestWithEmptyStateQueries
parameter_list|()
block|{
name|GetApplicationsRequest
name|request
init|=
name|ApplicationsRequestBuilder
operator|.
name|create
argument_list|()
operator|.
name|withStatesQuery
argument_list|(
name|Sets
operator|.
name|newHashSet
argument_list|()
argument_list|)
operator|.
name|build
argument_list|()
decl_stmt|;
name|GetApplicationsRequest
name|expectedRequest
init|=
name|getDefaultRequest
argument_list|()
decl_stmt|;
name|assertEquals
argument_list|(
name|expectedRequest
argument_list|,
name|request
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
argument_list|(
name|expected
operator|=
name|BadRequestException
operator|.
name|class
argument_list|)
DECL|method|testRequestWithInvalidStateQueries ()
specifier|public
name|void
name|testRequestWithInvalidStateQueries
parameter_list|()
block|{
name|GetApplicationsRequest
name|request
init|=
name|ApplicationsRequestBuilder
operator|.
name|create
argument_list|()
operator|.
name|withStatesQuery
argument_list|(
name|Sets
operator|.
name|newHashSet
argument_list|(
literal|"a1"
argument_list|,
literal|"a2"
argument_list|,
literal|""
argument_list|)
argument_list|)
operator|.
name|build
argument_list|()
decl_stmt|;
name|GetApplicationsRequest
name|expectedRequest
init|=
name|getDefaultRequest
argument_list|()
decl_stmt|;
name|assertEquals
argument_list|(
name|expectedRequest
argument_list|,
name|request
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
DECL|method|testRequestWithNullStateQueries ()
specifier|public
name|void
name|testRequestWithNullStateQueries
parameter_list|()
block|{
name|GetApplicationsRequest
name|request
init|=
name|ApplicationsRequestBuilder
operator|.
name|create
argument_list|()
operator|.
name|withStatesQuery
argument_list|(
literal|null
argument_list|)
operator|.
name|build
argument_list|()
decl_stmt|;
name|GetApplicationsRequest
name|expectedRequest
init|=
name|getDefaultRequest
argument_list|()
decl_stmt|;
name|assertEquals
argument_list|(
name|expectedRequest
argument_list|,
name|request
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
DECL|method|testRequestWithValidStateQueries ()
specifier|public
name|void
name|testRequestWithValidStateQueries
parameter_list|()
block|{
name|GetApplicationsRequest
name|request
init|=
name|ApplicationsRequestBuilder
operator|.
name|create
argument_list|()
operator|.
name|withStatesQuery
argument_list|(
name|Sets
operator|.
name|newHashSet
argument_list|(
name|YarnApplicationState
operator|.
name|NEW_SAVING
operator|.
name|toString
argument_list|()
argument_list|,
name|YarnApplicationState
operator|.
name|NEW
operator|.
name|toString
argument_list|()
argument_list|)
argument_list|)
operator|.
name|build
argument_list|()
decl_stmt|;
name|GetApplicationsRequest
name|expectedRequest
init|=
name|getDefaultRequest
argument_list|()
decl_stmt|;
name|Set
argument_list|<
name|String
argument_list|>
name|appStates
init|=
name|Sets
operator|.
name|newHashSet
argument_list|(
name|YarnApplicationState
operator|.
name|NEW_SAVING
operator|.
name|toString
argument_list|()
argument_list|,
name|YarnApplicationState
operator|.
name|NEW
operator|.
name|toString
argument_list|()
argument_list|)
decl_stmt|;
name|Set
argument_list|<
name|String
argument_list|>
name|appStatesLowerCase
init|=
name|parseQueries
argument_list|(
name|appStates
argument_list|,
literal|true
argument_list|)
decl_stmt|;
name|expectedRequest
operator|.
name|setApplicationStates
argument_list|(
name|appStatesLowerCase
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
name|expectedRequest
argument_list|,
name|request
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
DECL|method|testRequestWithNullUserQuery ()
specifier|public
name|void
name|testRequestWithNullUserQuery
parameter_list|()
block|{
name|GetApplicationsRequest
name|request
init|=
name|ApplicationsRequestBuilder
operator|.
name|create
argument_list|()
operator|.
name|withUserQuery
argument_list|(
literal|null
argument_list|)
operator|.
name|build
argument_list|()
decl_stmt|;
name|GetApplicationsRequest
name|expectedRequest
init|=
name|getDefaultRequest
argument_list|()
decl_stmt|;
name|assertEquals
argument_list|(
name|expectedRequest
argument_list|,
name|request
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
DECL|method|testRequestWithEmptyUserQuery ()
specifier|public
name|void
name|testRequestWithEmptyUserQuery
parameter_list|()
block|{
name|GetApplicationsRequest
name|request
init|=
name|ApplicationsRequestBuilder
operator|.
name|create
argument_list|()
operator|.
name|withUserQuery
argument_list|(
literal|""
argument_list|)
operator|.
name|build
argument_list|()
decl_stmt|;
name|GetApplicationsRequest
name|expectedRequest
init|=
name|getDefaultRequest
argument_list|()
decl_stmt|;
name|assertEquals
argument_list|(
name|expectedRequest
argument_list|,
name|request
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
DECL|method|testRequestWithUserQuery ()
specifier|public
name|void
name|testRequestWithUserQuery
parameter_list|()
block|{
name|GetApplicationsRequest
name|request
init|=
name|ApplicationsRequestBuilder
operator|.
name|create
argument_list|()
operator|.
name|withUserQuery
argument_list|(
literal|"user1"
argument_list|)
operator|.
name|build
argument_list|()
decl_stmt|;
name|GetApplicationsRequest
name|expectedRequest
init|=
name|getDefaultRequest
argument_list|()
decl_stmt|;
name|expectedRequest
operator|.
name|setUsers
argument_list|(
name|Sets
operator|.
name|newHashSet
argument_list|(
literal|"user1"
argument_list|)
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
name|expectedRequest
argument_list|,
name|request
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
DECL|method|testRequestWithNullQueueQuery ()
specifier|public
name|void
name|testRequestWithNullQueueQuery
parameter_list|()
block|{
name|ResourceManager
name|rm
init|=
name|mock
argument_list|(
name|ResourceManager
operator|.
name|class
argument_list|)
decl_stmt|;
name|GetApplicationsRequest
name|request
init|=
name|ApplicationsRequestBuilder
operator|.
name|create
argument_list|()
operator|.
name|withQueueQuery
argument_list|(
name|rm
argument_list|,
literal|null
argument_list|)
operator|.
name|build
argument_list|()
decl_stmt|;
name|GetApplicationsRequest
name|expectedRequest
init|=
name|getDefaultRequest
argument_list|()
decl_stmt|;
name|assertEquals
argument_list|(
name|expectedRequest
argument_list|,
name|request
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
DECL|method|testRequestWithEmptyQueueQuery ()
specifier|public
name|void
name|testRequestWithEmptyQueueQuery
parameter_list|()
block|{
name|ResourceManager
name|rm
init|=
name|mock
argument_list|(
name|ResourceManager
operator|.
name|class
argument_list|)
decl_stmt|;
name|GetApplicationsRequest
name|request
init|=
name|ApplicationsRequestBuilder
operator|.
name|create
argument_list|()
operator|.
name|withQueueQuery
argument_list|(
name|rm
argument_list|,
literal|""
argument_list|)
operator|.
name|build
argument_list|()
decl_stmt|;
name|GetApplicationsRequest
name|expectedRequest
init|=
name|getDefaultRequest
argument_list|()
decl_stmt|;
name|assertEquals
argument_list|(
name|expectedRequest
argument_list|,
name|request
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
DECL|method|testRequestWithQueueQueryExistingQueue ()
specifier|public
name|void
name|testRequestWithQueueQueryExistingQueue
parameter_list|()
block|{
name|ResourceManager
name|rm
init|=
name|mock
argument_list|(
name|ResourceManager
operator|.
name|class
argument_list|)
decl_stmt|;
name|GetApplicationsRequest
name|request
init|=
name|ApplicationsRequestBuilder
operator|.
name|create
argument_list|()
operator|.
name|withQueueQuery
argument_list|(
name|rm
argument_list|,
literal|"queue1"
argument_list|)
operator|.
name|build
argument_list|()
decl_stmt|;
name|GetApplicationsRequest
name|expectedRequest
init|=
name|getDefaultRequest
argument_list|()
decl_stmt|;
name|expectedRequest
operator|.
name|setQueues
argument_list|(
name|Sets
operator|.
name|newHashSet
argument_list|(
literal|"queue1"
argument_list|)
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
name|expectedRequest
argument_list|,
name|request
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
argument_list|(
name|expected
operator|=
name|BadRequestException
operator|.
name|class
argument_list|)
DECL|method|testRequestWithQueueQueryNotExistingQueue ()
specifier|public
name|void
name|testRequestWithQueueQueryNotExistingQueue
parameter_list|()
throws|throws
name|IOException
block|{
name|CapacityScheduler
name|cs
init|=
name|mock
argument_list|(
name|CapacityScheduler
operator|.
name|class
argument_list|)
decl_stmt|;
name|when
argument_list|(
name|cs
operator|.
name|getQueueInfo
argument_list|(
name|eq
argument_list|(
literal|"queue1"
argument_list|)
argument_list|,
name|anyBoolean
argument_list|()
argument_list|,
name|anyBoolean
argument_list|()
argument_list|)
argument_list|)
operator|.
name|thenThrow
argument_list|(
operator|new
name|IOException
argument_list|()
argument_list|)
expr_stmt|;
name|ResourceManager
name|rm
init|=
name|mock
argument_list|(
name|ResourceManager
operator|.
name|class
argument_list|)
decl_stmt|;
name|when
argument_list|(
name|rm
operator|.
name|getResourceScheduler
argument_list|()
argument_list|)
operator|.
name|thenReturn
argument_list|(
name|cs
argument_list|)
expr_stmt|;
name|GetApplicationsRequest
name|request
init|=
name|ApplicationsRequestBuilder
operator|.
name|create
argument_list|()
operator|.
name|withQueueQuery
argument_list|(
name|rm
argument_list|,
literal|"queue1"
argument_list|)
operator|.
name|build
argument_list|()
decl_stmt|;
name|GetApplicationsRequest
name|expectedRequest
init|=
name|getDefaultRequest
argument_list|()
decl_stmt|;
name|expectedRequest
operator|.
name|setQueues
argument_list|(
name|Sets
operator|.
name|newHashSet
argument_list|(
literal|"queue1"
argument_list|)
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
name|expectedRequest
argument_list|,
name|request
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
DECL|method|testRequestWithNullLimitQuery ()
specifier|public
name|void
name|testRequestWithNullLimitQuery
parameter_list|()
block|{
name|GetApplicationsRequest
name|request
init|=
name|ApplicationsRequestBuilder
operator|.
name|create
argument_list|()
operator|.
name|withLimit
argument_list|(
literal|null
argument_list|)
operator|.
name|build
argument_list|()
decl_stmt|;
name|GetApplicationsRequest
name|expectedRequest
init|=
name|getDefaultRequest
argument_list|()
decl_stmt|;
name|assertEquals
argument_list|(
name|expectedRequest
argument_list|,
name|request
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
DECL|method|testRequestWithEmptyLimitQuery ()
specifier|public
name|void
name|testRequestWithEmptyLimitQuery
parameter_list|()
block|{
name|GetApplicationsRequest
name|request
init|=
name|ApplicationsRequestBuilder
operator|.
name|create
argument_list|()
operator|.
name|withLimit
argument_list|(
literal|""
argument_list|)
operator|.
name|build
argument_list|()
decl_stmt|;
name|GetApplicationsRequest
name|expectedRequest
init|=
name|getDefaultRequest
argument_list|()
decl_stmt|;
name|assertEquals
argument_list|(
name|expectedRequest
argument_list|,
name|request
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
argument_list|(
name|expected
operator|=
name|BadRequestException
operator|.
name|class
argument_list|)
DECL|method|testRequestWithInvalidLimitQuery ()
specifier|public
name|void
name|testRequestWithInvalidLimitQuery
parameter_list|()
block|{
name|GetApplicationsRequest
name|request
init|=
name|ApplicationsRequestBuilder
operator|.
name|create
argument_list|()
operator|.
name|withLimit
argument_list|(
literal|"bla"
argument_list|)
operator|.
name|build
argument_list|()
decl_stmt|;
name|GetApplicationsRequest
name|expectedRequest
init|=
name|getDefaultRequest
argument_list|()
decl_stmt|;
name|assertEquals
argument_list|(
name|expectedRequest
argument_list|,
name|request
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
argument_list|(
name|expected
operator|=
name|BadRequestException
operator|.
name|class
argument_list|)
DECL|method|testRequestWithInvalidNegativeLimitQuery ()
specifier|public
name|void
name|testRequestWithInvalidNegativeLimitQuery
parameter_list|()
block|{
name|GetApplicationsRequest
name|request
init|=
name|ApplicationsRequestBuilder
operator|.
name|create
argument_list|()
operator|.
name|withLimit
argument_list|(
literal|"-10"
argument_list|)
operator|.
name|build
argument_list|()
decl_stmt|;
name|GetApplicationsRequest
name|expectedRequest
init|=
name|getDefaultRequest
argument_list|()
decl_stmt|;
name|assertEquals
argument_list|(
name|expectedRequest
argument_list|,
name|request
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
DECL|method|testRequestWithValidLimitQuery ()
specifier|public
name|void
name|testRequestWithValidLimitQuery
parameter_list|()
block|{
name|GetApplicationsRequest
name|request
init|=
name|ApplicationsRequestBuilder
operator|.
name|create
argument_list|()
operator|.
name|withLimit
argument_list|(
literal|"999"
argument_list|)
operator|.
name|build
argument_list|()
decl_stmt|;
name|GetApplicationsRequest
name|expectedRequest
init|=
name|getDefaultRequest
argument_list|()
decl_stmt|;
name|expectedRequest
operator|.
name|setLimit
argument_list|(
literal|999L
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
name|expectedRequest
argument_list|,
name|request
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
DECL|method|testRequestWithNullStartedTimeBeginQuery ()
specifier|public
name|void
name|testRequestWithNullStartedTimeBeginQuery
parameter_list|()
block|{
name|GetApplicationsRequest
name|request
init|=
name|ApplicationsRequestBuilder
operator|.
name|create
argument_list|()
operator|.
name|withStartedTimeBegin
argument_list|(
literal|null
argument_list|)
operator|.
name|build
argument_list|()
decl_stmt|;
name|GetApplicationsRequest
name|expectedRequest
init|=
name|getDefaultRequest
argument_list|()
decl_stmt|;
name|assertEquals
argument_list|(
name|expectedRequest
argument_list|,
name|request
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
DECL|method|testRequestWithEmptyStartedTimeBeginQuery ()
specifier|public
name|void
name|testRequestWithEmptyStartedTimeBeginQuery
parameter_list|()
block|{
name|GetApplicationsRequest
name|request
init|=
name|ApplicationsRequestBuilder
operator|.
name|create
argument_list|()
operator|.
name|withStartedTimeBegin
argument_list|(
literal|""
argument_list|)
operator|.
name|build
argument_list|()
decl_stmt|;
name|GetApplicationsRequest
name|expectedRequest
init|=
name|getDefaultRequest
argument_list|()
decl_stmt|;
name|assertEquals
argument_list|(
name|expectedRequest
argument_list|,
name|request
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
argument_list|(
name|expected
operator|=
name|BadRequestException
operator|.
name|class
argument_list|)
DECL|method|testRequestWithInvalidStartedTimeBeginQuery ()
specifier|public
name|void
name|testRequestWithInvalidStartedTimeBeginQuery
parameter_list|()
block|{
name|GetApplicationsRequest
name|request
init|=
name|ApplicationsRequestBuilder
operator|.
name|create
argument_list|()
operator|.
name|withStartedTimeBegin
argument_list|(
literal|"bla"
argument_list|)
operator|.
name|build
argument_list|()
decl_stmt|;
name|GetApplicationsRequest
name|expectedRequest
init|=
name|getDefaultRequest
argument_list|()
decl_stmt|;
name|assertEquals
argument_list|(
name|expectedRequest
argument_list|,
name|request
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
argument_list|(
name|expected
operator|=
name|BadRequestException
operator|.
name|class
argument_list|)
DECL|method|testRequestWithInvalidNegativeStartedTimeBeginQuery ()
specifier|public
name|void
name|testRequestWithInvalidNegativeStartedTimeBeginQuery
parameter_list|()
block|{
name|GetApplicationsRequest
name|request
init|=
name|ApplicationsRequestBuilder
operator|.
name|create
argument_list|()
operator|.
name|withStartedTimeBegin
argument_list|(
literal|"-1"
argument_list|)
operator|.
name|build
argument_list|()
decl_stmt|;
name|GetApplicationsRequest
name|expectedRequest
init|=
name|getDefaultRequest
argument_list|()
decl_stmt|;
name|assertEquals
argument_list|(
name|expectedRequest
argument_list|,
name|request
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
DECL|method|testRequestWithValidStartedTimeBeginQuery ()
specifier|public
name|void
name|testRequestWithValidStartedTimeBeginQuery
parameter_list|()
block|{
name|GetApplicationsRequest
name|request
init|=
name|ApplicationsRequestBuilder
operator|.
name|create
argument_list|()
operator|.
name|withStartedTimeBegin
argument_list|(
literal|"999"
argument_list|)
operator|.
name|build
argument_list|()
decl_stmt|;
name|GetApplicationsRequest
name|expectedRequest
init|=
name|getDefaultRequest
argument_list|()
decl_stmt|;
name|expectedRequest
operator|.
name|setStartRange
argument_list|(
literal|999L
argument_list|,
name|Long
operator|.
name|MAX_VALUE
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
name|expectedRequest
argument_list|,
name|request
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
DECL|method|testRequestWithNullStartedTimeEndQuery ()
specifier|public
name|void
name|testRequestWithNullStartedTimeEndQuery
parameter_list|()
block|{
name|GetApplicationsRequest
name|request
init|=
name|ApplicationsRequestBuilder
operator|.
name|create
argument_list|()
operator|.
name|withStartedTimeEnd
argument_list|(
literal|null
argument_list|)
operator|.
name|build
argument_list|()
decl_stmt|;
name|GetApplicationsRequest
name|expectedRequest
init|=
name|getDefaultRequest
argument_list|()
decl_stmt|;
name|assertEquals
argument_list|(
name|expectedRequest
argument_list|,
name|request
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
DECL|method|testRequestWithEmptywithStartedTimeEndQuery ()
specifier|public
name|void
name|testRequestWithEmptywithStartedTimeEndQuery
parameter_list|()
block|{
name|GetApplicationsRequest
name|request
init|=
name|ApplicationsRequestBuilder
operator|.
name|create
argument_list|()
operator|.
name|withStartedTimeEnd
argument_list|(
literal|""
argument_list|)
operator|.
name|build
argument_list|()
decl_stmt|;
name|GetApplicationsRequest
name|expectedRequest
init|=
name|getDefaultRequest
argument_list|()
decl_stmt|;
name|assertEquals
argument_list|(
name|expectedRequest
argument_list|,
name|request
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
argument_list|(
name|expected
operator|=
name|BadRequestException
operator|.
name|class
argument_list|)
DECL|method|testRequestWithInvalidStartedTimeEndQuery ()
specifier|public
name|void
name|testRequestWithInvalidStartedTimeEndQuery
parameter_list|()
block|{
name|GetApplicationsRequest
name|request
init|=
name|ApplicationsRequestBuilder
operator|.
name|create
argument_list|()
operator|.
name|withStartedTimeEnd
argument_list|(
literal|"bla"
argument_list|)
operator|.
name|build
argument_list|()
decl_stmt|;
name|GetApplicationsRequest
name|expectedRequest
init|=
name|getDefaultRequest
argument_list|()
decl_stmt|;
name|assertEquals
argument_list|(
name|expectedRequest
argument_list|,
name|request
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
argument_list|(
name|expected
operator|=
name|BadRequestException
operator|.
name|class
argument_list|)
DECL|method|testRequestWithInvalidNegativeStartedTimeEndQuery ()
specifier|public
name|void
name|testRequestWithInvalidNegativeStartedTimeEndQuery
parameter_list|()
block|{
name|GetApplicationsRequest
name|request
init|=
name|ApplicationsRequestBuilder
operator|.
name|create
argument_list|()
operator|.
name|withStartedTimeEnd
argument_list|(
literal|"-1"
argument_list|)
operator|.
name|build
argument_list|()
decl_stmt|;
name|GetApplicationsRequest
name|expectedRequest
init|=
name|getDefaultRequest
argument_list|()
decl_stmt|;
name|assertEquals
argument_list|(
name|expectedRequest
argument_list|,
name|request
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
DECL|method|testRequestWithValidStartedTimeEndQuery ()
specifier|public
name|void
name|testRequestWithValidStartedTimeEndQuery
parameter_list|()
block|{
name|GetApplicationsRequest
name|request
init|=
name|ApplicationsRequestBuilder
operator|.
name|create
argument_list|()
operator|.
name|withStartedTimeEnd
argument_list|(
literal|"999"
argument_list|)
operator|.
name|build
argument_list|()
decl_stmt|;
name|GetApplicationsRequest
name|expectedRequest
init|=
name|getDefaultRequest
argument_list|()
decl_stmt|;
name|expectedRequest
operator|.
name|setStartRange
argument_list|(
literal|0L
argument_list|,
literal|999L
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
name|expectedRequest
argument_list|,
name|request
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
DECL|method|testRequestWithNullFinishedTimeBeginQuery ()
specifier|public
name|void
name|testRequestWithNullFinishedTimeBeginQuery
parameter_list|()
block|{
name|GetApplicationsRequest
name|request
init|=
name|ApplicationsRequestBuilder
operator|.
name|create
argument_list|()
operator|.
name|withFinishTimeBegin
argument_list|(
literal|null
argument_list|)
operator|.
name|build
argument_list|()
decl_stmt|;
name|GetApplicationsRequest
name|expectedRequest
init|=
name|getDefaultRequest
argument_list|()
decl_stmt|;
name|assertEquals
argument_list|(
name|expectedRequest
argument_list|,
name|request
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
DECL|method|testRequestWithEmptyFinishedTimeBeginQuery ()
specifier|public
name|void
name|testRequestWithEmptyFinishedTimeBeginQuery
parameter_list|()
block|{
name|GetApplicationsRequest
name|request
init|=
name|ApplicationsRequestBuilder
operator|.
name|create
argument_list|()
operator|.
name|withFinishTimeBegin
argument_list|(
literal|""
argument_list|)
operator|.
name|build
argument_list|()
decl_stmt|;
name|GetApplicationsRequest
name|expectedRequest
init|=
name|getDefaultRequest
argument_list|()
decl_stmt|;
name|assertEquals
argument_list|(
name|expectedRequest
argument_list|,
name|request
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
argument_list|(
name|expected
operator|=
name|BadRequestException
operator|.
name|class
argument_list|)
DECL|method|testRequestWithInvalidFinishedTimeBeginQuery ()
specifier|public
name|void
name|testRequestWithInvalidFinishedTimeBeginQuery
parameter_list|()
block|{
name|GetApplicationsRequest
name|request
init|=
name|ApplicationsRequestBuilder
operator|.
name|create
argument_list|()
operator|.
name|withFinishTimeBegin
argument_list|(
literal|"bla"
argument_list|)
operator|.
name|build
argument_list|()
decl_stmt|;
name|GetApplicationsRequest
name|expectedRequest
init|=
name|getDefaultRequest
argument_list|()
decl_stmt|;
name|assertEquals
argument_list|(
name|expectedRequest
argument_list|,
name|request
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
argument_list|(
name|expected
operator|=
name|BadRequestException
operator|.
name|class
argument_list|)
DECL|method|testRequestWithInvalidNegativeFinishedTimeBeginQuery ()
specifier|public
name|void
name|testRequestWithInvalidNegativeFinishedTimeBeginQuery
parameter_list|()
block|{
name|GetApplicationsRequest
name|request
init|=
name|ApplicationsRequestBuilder
operator|.
name|create
argument_list|()
operator|.
name|withFinishTimeBegin
argument_list|(
literal|"-1"
argument_list|)
operator|.
name|build
argument_list|()
decl_stmt|;
name|GetApplicationsRequest
name|expectedRequest
init|=
name|getDefaultRequest
argument_list|()
decl_stmt|;
name|assertEquals
argument_list|(
name|expectedRequest
argument_list|,
name|request
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
DECL|method|testRequestWithValidFinishedTimeBeginQuery ()
specifier|public
name|void
name|testRequestWithValidFinishedTimeBeginQuery
parameter_list|()
block|{
name|GetApplicationsRequest
name|request
init|=
name|ApplicationsRequestBuilder
operator|.
name|create
argument_list|()
operator|.
name|withFinishTimeBegin
argument_list|(
literal|"999"
argument_list|)
operator|.
name|build
argument_list|()
decl_stmt|;
name|GetApplicationsRequest
name|expectedRequest
init|=
name|getDefaultRequest
argument_list|()
decl_stmt|;
name|expectedRequest
operator|.
name|setFinishRange
argument_list|(
literal|999L
argument_list|,
name|Long
operator|.
name|MAX_VALUE
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
name|expectedRequest
argument_list|,
name|request
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
DECL|method|testRequestWithNullFinishedTimeEndQuery ()
specifier|public
name|void
name|testRequestWithNullFinishedTimeEndQuery
parameter_list|()
block|{
name|GetApplicationsRequest
name|request
init|=
name|ApplicationsRequestBuilder
operator|.
name|create
argument_list|()
operator|.
name|withFinishTimeEnd
argument_list|(
literal|null
argument_list|)
operator|.
name|build
argument_list|()
decl_stmt|;
name|GetApplicationsRequest
name|expectedRequest
init|=
name|getDefaultRequest
argument_list|()
decl_stmt|;
name|assertEquals
argument_list|(
name|expectedRequest
argument_list|,
name|request
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
DECL|method|testRequestWithEmptyFinishTimeEndQuery ()
specifier|public
name|void
name|testRequestWithEmptyFinishTimeEndQuery
parameter_list|()
block|{
name|GetApplicationsRequest
name|request
init|=
name|ApplicationsRequestBuilder
operator|.
name|create
argument_list|()
operator|.
name|withFinishTimeEnd
argument_list|(
literal|""
argument_list|)
operator|.
name|build
argument_list|()
decl_stmt|;
name|GetApplicationsRequest
name|expectedRequest
init|=
name|getDefaultRequest
argument_list|()
decl_stmt|;
name|assertEquals
argument_list|(
name|expectedRequest
argument_list|,
name|request
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
argument_list|(
name|expected
operator|=
name|BadRequestException
operator|.
name|class
argument_list|)
DECL|method|testRequestWithInvalidFinishTimeEndQuery ()
specifier|public
name|void
name|testRequestWithInvalidFinishTimeEndQuery
parameter_list|()
block|{
name|GetApplicationsRequest
name|request
init|=
name|ApplicationsRequestBuilder
operator|.
name|create
argument_list|()
operator|.
name|withFinishTimeEnd
argument_list|(
literal|"bla"
argument_list|)
operator|.
name|build
argument_list|()
decl_stmt|;
name|GetApplicationsRequest
name|expectedRequest
init|=
name|getDefaultRequest
argument_list|()
decl_stmt|;
name|assertEquals
argument_list|(
name|expectedRequest
argument_list|,
name|request
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
argument_list|(
name|expected
operator|=
name|BadRequestException
operator|.
name|class
argument_list|)
DECL|method|testRequestWithInvalidNegativeFinishedTimeEndQuery ()
specifier|public
name|void
name|testRequestWithInvalidNegativeFinishedTimeEndQuery
parameter_list|()
block|{
name|GetApplicationsRequest
name|request
init|=
name|ApplicationsRequestBuilder
operator|.
name|create
argument_list|()
operator|.
name|withFinishTimeEnd
argument_list|(
literal|"-1"
argument_list|)
operator|.
name|build
argument_list|()
decl_stmt|;
name|GetApplicationsRequest
name|expectedRequest
init|=
name|getDefaultRequest
argument_list|()
decl_stmt|;
name|assertEquals
argument_list|(
name|expectedRequest
argument_list|,
name|request
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
DECL|method|testRequestWithValidFinishTimeEndQuery ()
specifier|public
name|void
name|testRequestWithValidFinishTimeEndQuery
parameter_list|()
block|{
name|GetApplicationsRequest
name|request
init|=
name|ApplicationsRequestBuilder
operator|.
name|create
argument_list|()
operator|.
name|withFinishTimeEnd
argument_list|(
literal|"999"
argument_list|)
operator|.
name|build
argument_list|()
decl_stmt|;
name|GetApplicationsRequest
name|expectedRequest
init|=
name|getDefaultRequest
argument_list|()
decl_stmt|;
name|expectedRequest
operator|.
name|setFinishRange
argument_list|(
literal|0L
argument_list|,
literal|999L
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
name|expectedRequest
argument_list|,
name|request
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
DECL|method|testRequestWithValidStartTimeRangeQuery ()
specifier|public
name|void
name|testRequestWithValidStartTimeRangeQuery
parameter_list|()
block|{
name|GetApplicationsRequest
name|request
init|=
name|ApplicationsRequestBuilder
operator|.
name|create
argument_list|()
operator|.
name|withStartedTimeBegin
argument_list|(
literal|"1000"
argument_list|)
operator|.
name|withStartedTimeEnd
argument_list|(
literal|"2000"
argument_list|)
operator|.
name|build
argument_list|()
decl_stmt|;
name|GetApplicationsRequest
name|expectedRequest
init|=
name|getDefaultRequest
argument_list|()
decl_stmt|;
name|expectedRequest
operator|.
name|setStartRange
argument_list|(
literal|1000L
argument_list|,
literal|2000L
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
name|expectedRequest
argument_list|,
name|request
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
argument_list|(
name|expected
operator|=
name|BadRequestException
operator|.
name|class
argument_list|)
DECL|method|testRequestWithInvalidStartTimeRangeQuery ()
specifier|public
name|void
name|testRequestWithInvalidStartTimeRangeQuery
parameter_list|()
block|{
name|GetApplicationsRequest
name|request
init|=
name|ApplicationsRequestBuilder
operator|.
name|create
argument_list|()
operator|.
name|withStartedTimeBegin
argument_list|(
literal|"2000"
argument_list|)
operator|.
name|withStartedTimeEnd
argument_list|(
literal|"1000"
argument_list|)
operator|.
name|build
argument_list|()
decl_stmt|;
block|}
annotation|@
name|Test
DECL|method|testRequestWithValidFinishTimeRangeQuery ()
specifier|public
name|void
name|testRequestWithValidFinishTimeRangeQuery
parameter_list|()
block|{
name|GetApplicationsRequest
name|request
init|=
name|ApplicationsRequestBuilder
operator|.
name|create
argument_list|()
operator|.
name|withFinishTimeBegin
argument_list|(
literal|"1000"
argument_list|)
operator|.
name|withFinishTimeEnd
argument_list|(
literal|"2000"
argument_list|)
operator|.
name|build
argument_list|()
decl_stmt|;
name|GetApplicationsRequest
name|expectedRequest
init|=
name|getDefaultRequest
argument_list|()
decl_stmt|;
name|expectedRequest
operator|.
name|setFinishRange
argument_list|(
literal|1000L
argument_list|,
literal|2000L
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
name|expectedRequest
argument_list|,
name|request
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
argument_list|(
name|expected
operator|=
name|BadRequestException
operator|.
name|class
argument_list|)
DECL|method|testRequestWithInvalidFinishTimeRangeQuery ()
specifier|public
name|void
name|testRequestWithInvalidFinishTimeRangeQuery
parameter_list|()
block|{
name|GetApplicationsRequest
name|request
init|=
name|ApplicationsRequestBuilder
operator|.
name|create
argument_list|()
operator|.
name|withFinishTimeBegin
argument_list|(
literal|"2000"
argument_list|)
operator|.
name|withFinishTimeEnd
argument_list|(
literal|"1000"
argument_list|)
operator|.
name|build
argument_list|()
decl_stmt|;
block|}
annotation|@
name|Test
DECL|method|testRequestWithNullApplicationTypesQuery ()
specifier|public
name|void
name|testRequestWithNullApplicationTypesQuery
parameter_list|()
block|{
name|GetApplicationsRequest
name|request
init|=
name|ApplicationsRequestBuilder
operator|.
name|create
argument_list|()
operator|.
name|withApplicationTypes
argument_list|(
literal|null
argument_list|)
operator|.
name|build
argument_list|()
decl_stmt|;
block|}
annotation|@
name|Test
DECL|method|testRequestWithEmptyApplicationTypesQuery ()
specifier|public
name|void
name|testRequestWithEmptyApplicationTypesQuery
parameter_list|()
block|{
name|GetApplicationsRequest
name|request
init|=
name|ApplicationsRequestBuilder
operator|.
name|create
argument_list|()
operator|.
name|withApplicationTypes
argument_list|(
name|Sets
operator|.
name|newHashSet
argument_list|()
argument_list|)
operator|.
name|build
argument_list|()
decl_stmt|;
name|GetApplicationsRequest
name|expectedRequest
init|=
name|getDefaultRequest
argument_list|()
decl_stmt|;
name|expectedRequest
operator|.
name|setApplicationTypes
argument_list|(
name|Sets
operator|.
name|newHashSet
argument_list|()
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
name|expectedRequest
argument_list|,
name|request
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
DECL|method|testRequestWithValidApplicationTypesQuery ()
specifier|public
name|void
name|testRequestWithValidApplicationTypesQuery
parameter_list|()
block|{
name|GetApplicationsRequest
name|request
init|=
name|ApplicationsRequestBuilder
operator|.
name|create
argument_list|()
operator|.
name|withApplicationTypes
argument_list|(
name|Sets
operator|.
name|newHashSet
argument_list|(
literal|"type1"
argument_list|)
argument_list|)
operator|.
name|build
argument_list|()
decl_stmt|;
name|GetApplicationsRequest
name|expectedRequest
init|=
name|getDefaultRequest
argument_list|()
decl_stmt|;
name|expectedRequest
operator|.
name|setApplicationTypes
argument_list|(
name|Sets
operator|.
name|newHashSet
argument_list|(
literal|"type1"
argument_list|)
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
name|expectedRequest
argument_list|,
name|request
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
DECL|method|testRequestWithNullApplicationTagsQuery ()
specifier|public
name|void
name|testRequestWithNullApplicationTagsQuery
parameter_list|()
block|{
name|GetApplicationsRequest
name|request
init|=
name|ApplicationsRequestBuilder
operator|.
name|create
argument_list|()
operator|.
name|withApplicationTags
argument_list|(
literal|null
argument_list|)
operator|.
name|build
argument_list|()
decl_stmt|;
block|}
annotation|@
name|Test
DECL|method|testRequestWithEmptyApplicationTagsQuery ()
specifier|public
name|void
name|testRequestWithEmptyApplicationTagsQuery
parameter_list|()
block|{
name|GetApplicationsRequest
name|request
init|=
name|ApplicationsRequestBuilder
operator|.
name|create
argument_list|()
operator|.
name|withApplicationTags
argument_list|(
name|Sets
operator|.
name|newHashSet
argument_list|()
argument_list|)
operator|.
name|build
argument_list|()
decl_stmt|;
name|GetApplicationsRequest
name|expectedRequest
init|=
name|getDefaultRequest
argument_list|()
decl_stmt|;
name|expectedRequest
operator|.
name|setApplicationTags
argument_list|(
name|Sets
operator|.
name|newHashSet
argument_list|()
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
name|expectedRequest
argument_list|,
name|request
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
DECL|method|testRequestWithValidApplicationTagsQuery ()
specifier|public
name|void
name|testRequestWithValidApplicationTagsQuery
parameter_list|()
block|{
name|GetApplicationsRequest
name|request
init|=
name|ApplicationsRequestBuilder
operator|.
name|create
argument_list|()
operator|.
name|withApplicationTags
argument_list|(
name|Sets
operator|.
name|newHashSet
argument_list|(
literal|"tag1"
argument_list|)
argument_list|)
operator|.
name|build
argument_list|()
decl_stmt|;
name|GetApplicationsRequest
name|expectedRequest
init|=
name|getDefaultRequest
argument_list|()
decl_stmt|;
name|expectedRequest
operator|.
name|setApplicationTags
argument_list|(
name|Sets
operator|.
name|newHashSet
argument_list|(
literal|"tag1"
argument_list|)
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
name|expectedRequest
argument_list|,
name|request
argument_list|)
expr_stmt|;
block|}
block|}
end_class

end_unit

