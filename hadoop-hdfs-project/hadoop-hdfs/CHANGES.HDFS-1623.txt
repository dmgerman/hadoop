Changes for HDFS-1623 branch.

This change list will be merged into the trunk CHANGES.txt when the HDFS-1623
branch is merged.
------------------------------

HDFS-2179. Add fencing framework and mechanisms for NameNode HA. (todd)

HDFS-1974. Introduce active and standy states to the namenode. (suresh)

HDFS-2407. getServerDefaults and getStats don't check operation category (atm)

HDFS-1973. HA: HDFS clients must handle namenode failover and switch over to the new active namenode. (atm)

HDFS-2301. Start/stop appropriate namenode services when transition to active and standby states. (suresh)

HDFS-2231. Configuration changes for HA namenode. (suresh)

HDFS-2418. Change ConfiguredFailoverProxyProvider to take advantage of HDFS-2231. (atm)

HDFS-2393. Mark appropriate methods of ClientProtocol with the idempotent annotation. (atm)

HDFS-2523. Small NN fixes to include HAServiceProtocol and prevent NPE on shutdown. (todd)

HDFS-2577. NN fails to start since it tries to start secret manager in safemode. (todd)

HDFS-2582. Scope dfs.ha.namenodes config by nameservice (todd)

HDFS-2591. MiniDFSCluster support to mix and match federation with HA (todd)

HDFS-1975. Support for sharing the namenode state from active to standby. (jitendra, atm, todd)

HDFS-1971. Send block report from datanode to both active and standby namenodes. (sanjay, todd via suresh)

HDFS-2616. Change DatanodeProtocol#sendHeartbeat() to return HeartbeatResponse. (suresh)

HDFS-2622. Fix TestDFSUpgrade in HA branch. (todd)

HDFS-2612. Handle refreshNameNodes in federated HA clusters (todd)

HDFS-2623. Add test case for hot standby capability (todd)

HDFS-2626. BPOfferService.verifyAndSetNamespaceInfo needs to be synchronized (todd)

HDFS-2624. ConfiguredFailoverProxyProvider doesn't correctly stop ProtocolTranslators (todd)

HDFS-2625. TestDfsOverAvroRpc failing after introduction of HeartbeatResponse type (todd)

HDFS-2627. Determine DN's view of which NN is active based on heartbeat responses (todd)

HDFS-2634. Standby needs to ingest latest edit logs before transitioning to active (todd)

HDFS-2671. NN should throw StandbyException in response to RPCs in STANDBY state (todd)

HDFS-2680. DFSClient should construct failover proxy with exponential backoff (todd)

HDFS-2683. Authority-based lookup of proxy provider fails if path becomes canonicalized (todd)

HDFS-2689. HA: BookKeeperEditLogInputStream doesn't implement isInProgress() (atm)

HDFS-2602. NN should log newly-allocated blocks without losing BlockInfo (atm)

HDFS-2667. Fix transition from active to standby (todd)

HDFS-2684. Fix up some failing unit tests on HA branch (todd)

HDFS-2679. Add interface to query current state to HAServiceProtocol (eli via todd)

HDFS-2677. Web UI should indicate the NN state. (eli via todd)

HDFS-2678. When a FailoverProxyProvider is used, DFSClient should not retry connection ten times before failing over (atm via todd)

HDFS-2682. When a FailoverProxyProvider is used, Client should not retry for 45 times if it is timing out to connect to server. (Uma Maheswara Rao G via todd)

HDFS-2693. Fix synchronization issues around state transition (todd)

HDFS-1972. Fencing mechanism for block invalidations and replications (todd)

HDFS-2714. Fix test cases which use standalone FSNamesystems (todd)

HDFS-2692. Fix bugs related to failover from/into safe mode. (todd)

HDFS-2716. Configuration needs to allow different dfs.http.addresses for each HA NN (todd)

HDFS-2720. Fix MiniDFSCluster HA support to work properly on Windows. (Uma Maheswara Rao G via todd)

HDFS-2291. Allow the StandbyNode to make checkpoints in an HA setup. (todd)

HDFS-2709. Appropriately handle error conditions in EditLogTailer (atm via todd)

HDFS-2730. Refactor shared HA-related test code into HATestUtil class (todd)

HDFS-2762. Fix TestCheckpoint timing out on HA branch. (Uma Maheswara Rao G via todd)

HDFS-2724. NN web UI can throw NPE after startup, before standby state is entered. (todd)

HDFS-2753. Fix standby getting stuck in safemode when blocks are written while SBN is down. (Hari Mankude and todd via todd)

HDFS-2773. Reading edit logs from an earlier version should not leave blocks in under-construction state. (todd)

HDFS-2775. Fix TestStandbyCheckpoints.testBothNodesInStandbyState failing intermittently. (todd)

HDFS-2766. Test for case where standby partially reads log and then performs checkpoint. (atm)

HDFS-2738. FSEditLog.selectinputStreams is reading through in-progress streams even when non-in-progress are requested. (atm)

HDFS-2789. TestHAAdmin.testFailover is failing (eli)

HDFS-2747. Entering safe mode after starting SBN can NPE. (Uma Maheswara Rao G via todd)

HDFS-2772. On transition to active, standby should not swallow ELIE. (atm)

HDFS-2767. ConfiguredFailoverProxyProvider should support NameNodeProtocol. (Uma Maheswara Rao G via todd)

HDFS-2795. Standby NN takes a long time to recover from a dead DN starting up. (todd)

HDFS-2592. Balancer support for HA namenodes. (Uma Maheswara Rao G via todd)
